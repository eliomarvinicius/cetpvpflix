{% extends 'base.html' %}
{% load static %}

{% block title %}CETPVPFLIX - Seu catálogo de filmes e séries{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="bg-dark text-white py-5" style="background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1489599849843-2d9b73e5d5c4?w=1200') center/cover;">
    <div class="container">
        <div class="row align-items-center min-vh-50">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">
                    Bem-vindo ao <span class="text-orange">CETPVPFLIX</span>
                </h1>
                <p class="lead mb-4">
                    Descubra, avalie e organize sua coleção pessoal de filmes e séries. 
                    Explore milhares de títulos e compartilhe suas opiniões com a comunidade.
                </p>
                <div class="d-flex gap-3">
                    <a href="{% url 'catalog:movies' %}" class="btn btn-primary btn-lg">
                        <i class="fas fa-video"></i> Explorar Filmes
                    </a>
                    <a href="{% url 'catalog:tv_shows' %}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-tv"></i> Ver Séries
                    </a>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <div class="row text-center">
                    <div class="col-4">
                        <div class="bg-orange p-3 rounded-circle d-inline-block mb-2">
                            <i class="fas fa-film fa-2x text-white"></i>
                        </div>
                        <h3 class="h5">{{ stats.total_movies }}</h3>
                        <p class="small">Filmes</p>
                    </div>
                    <div class="col-4">
                        <div class="bg-orange p-3 rounded-circle d-inline-block mb-2">
                            <i class="fas fa-tv fa-2x text-white"></i>
                        </div>
                        <h3 class="h5">{{ stats.total_tv_shows }}</h3>
                        <p class="small">Séries</p>
                    </div>
                    <div class="col-4">
                        <div class="bg-orange p-3 rounded-circle d-inline-block mb-2">
                            <i class="fas fa-star fa-2x text-white"></i>
                        </div>
                        <h3 class="h5">{{ stats.total_reviews }}</h3>
                        <p class="small">Avaliações</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Filmes Populares -->
<section class="py-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="h3 mb-0">
                <i class="fas fa-fire text-orange"></i> Filmes em Destaque
            </h2>
            <a href="{% url 'catalog:movies' %}" class="btn btn-outline-primary">
                Ver Todos <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        
        <div class="row">
            {% for movie in popular_movies %}
            <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-4">
                <div class="card movie-card h-100">
                    <a href="{% url 'catalog:media_detail' movie.pk %}" class="text-decoration-none">
                        {% if movie.poster_path %}
                            <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" 
                                 alt="{{ movie.title }}" class="card-img-top">
                        {% else %}
                            <div class="bg-secondary d-flex align-items-center justify-content-center" 
                                 style="height: 400px;">
                                <i class="fas fa-film fa-3x text-muted"></i>
                            </div>
                        {% endif %}
                    </a>
                    <div class="card-body p-3">
                        <h6 class="card-title mb-2">
                            <a href="{% url 'catalog:media_detail' movie.pk %}" 
                               class="text-decoration-none text-dark">{{ movie.title|truncatechars:25 }}</a>
                        </h6>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="stars">
                                {% if movie.vote_average >= 8 %}
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                                {% elif movie.vote_average >= 6 %}
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
                                {% elif movie.vote_average >= 4 %}
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
                                {% elif movie.vote_average >= 2 %}
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
                                {% else %}
                                    <i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
                                {% endif %}
                            </div>
                            <small class="text-muted">
                                {{ movie.release_date.year|default:"N/A" }}
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12">
                <div class="text-center py-5">
                    <i class="fas fa-film fa-4x text-muted mb-3"></i>
                    <h4 class="text-muted">Nenhum filme encontrado</h4>
                    <p>Os filmes serão carregados em breve!</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Séries Populares -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="h3 mb-0">
                <i class="fas fa-tv text-orange"></i> Séries em Destaque
            </h2>
            <a href="{% url 'catalog:tv_shows' %}" class="btn btn-outline-primary">
                Ver Todas <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        
        <div class="row">
            {% for show in popular_tv_shows %}
            <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-4">
                <div class="card movie-card h-100">
                    <a href="{% url 'catalog:media_detail' show.pk %}" class="text-decoration-none">
                        {% if show.poster_path %}
                            <img src="https://image.tmdb.org/t/p/w500{{ show.poster_path }}" 
                                 alt="{{ show.title }}" class="card-img-top">
                        {% else %}
                            <div class="bg-secondary d-flex align-items-center justify-content-center" 
                                 style="height: 400px;">
                                <i class="fas fa-tv fa-3x text-muted"></i>
                            </div>
                        {% endif %}
                    </a>
                    <div class="card-body p-3">
                        <h6 class="card-title mb-2">
                            <a href="{% url 'catalog:media_detail' show.pk %}" 
                               class="text-decoration-none text-dark">{{ show.title|truncatechars:25 }}</a>
                        </h6>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="stars">
                                {% if show.vote_average >= 8 %}
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                                {% elif show.vote_average >= 6 %}
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
                                {% elif show.vote_average >= 4 %}
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
                                {% elif show.vote_average >= 2 %}
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
                                {% else %}
                                    <i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
                                {% endif %}
                            </div>
                            <small class="text-muted">
                                {{ show.release_date.year|default:"N/A" }}
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12">
                <div class="text-center py-5">
                    <i class="fas fa-tv fa-4x text-muted mb-3"></i>
                    <h4 class="text-muted">Nenhuma série encontrada</h4>
                    <p>As séries serão carregadas em breve!</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- CTA Section -->
{% if not user.is_authenticated %}
<section class="py-5 bg-orange text-white">
    <div class="container text-center">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <h2 class="mb-3">Faça Parte da Nossa Comunidade</h2>
                <p class="mb-4">
                    Crie sua conta gratuita e comece a organizar sua lista pessoal de filmes e séries favoritos.
                </p>
                <div class="d-flex gap-3 justify-content-center">
                    <a href="{% url 'accounts:register' %}" class="btn btn-light btn-lg">
                        <i class="fas fa-user-plus"></i> Criar Conta
                    </a>
                    <a href="{% url 'accounts:login' %}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-sign-in-alt"></i> Fazer Login
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-4 mb-4">
                <div class="feature-icon bg-orange text-white rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center" 
                     style="width: 80px; height: 80px;">
                    <i class="fas fa-search fa-2x"></i>
                </div>
                <h4>Descubra Novos Títulos</h4>
                <p class="text-muted">
                    Explore nosso vasto catálogo com milhares de filmes e séries de todos os gêneros.
                </p>
            </div>
            <div class="col-lg-4 mb-4">
                <div class="feature-icon bg-orange text-white rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center" 
                     style="width: 80px; height: 80px;">
                    <i class="fas fa-star fa-2x"></i>
                </div>
                <h4>Avalie e Comente</h4>
                <p class="text-muted">
                    Compartilhe suas opiniões e ajude outros usuários a descobrir grandes títulos.
                </p>
            </div>
            <div class="col-lg-4 mb-4">
                <div class="feature-icon bg-orange text-white rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center" 
                     style="width: 80px; height: 80px;">
                    <i class="fas fa-heart fa-2x"></i>
                </div>
                <h4>Organize Sua Lista</h4>
                <p class="text-muted">
                    Mantenha seus filmes e séries favoritos organizados em sua lista pessoal.
                </p>
            </div>
        </div>
    </div>
</section>
{% endblock %}